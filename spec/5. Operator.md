# Operator



## Introduction

- functions with one or two parameters that are called prefix, infix, or postfix
- allows for custom operators because object methods are user-level features
- allows for more operators because name not limited by symbols, e.g. `lt`, `+`, etc.
- provides built-in methods and corresponding operators on data type objects for most common operations
- encouraged to declare custom operators instead of using built-in to be more expressive, e.g. `list isEmpty` instead of `list.length == 0` (JavaScript)



## Declaration

- use `$` to denote position of function name
- prefix or postfix if one non-optional argument

```
$ a ->: {
  a -> negate @ Number
} =: -
```

- bifix if two non-optional arguments
<!-- todo: shoud allow around-fix? like grouping operator? -->

```
a $ b ->: {
  a, b -> add @ Number
} =: +
```

- can't define precedence, fixed by the type of operation, must use grouping to achieve correct semantics



## Calling

```
- n
```

```
n + m
```

- must use whitespace around operator name, otherwise would interpret it as single identifier which doesn't exist, e.g. `n+m`, `-n`
- to allowing no whitespace would need to forbid use of operator name in identifiers and semantics aware parsing



## Precedence

1. Property access

    - right-to-left associative

    ```
    size @ "Peter" @ String
    ```

2. Function call

    - left-to-right associative

    ```
    1 -> negate -> print
    ```

3. Postfix operation

    - left-to-right associative

    ?

4. Prefix operation

    - right-to-left associative

    ```
    + - 1
    - + 1
    ```

5. Infix operation

    - left-to-right associative for same type

    ```
    1 + 2 + 3
    1 ^ 2 ^ 3
    1 / 2 / 3
    1 % 2 % 3
    ```

    - otherwise grouping necessary

    ```
    1 + 2 * 3
    1 ?= 2 ?>= 3
    ```

6. Declaration, Assignment

    - left-to-right associative

    ```
    1 ~ n ~ m
    1 =: n =: m
    1 ~ n =: m
    1 =: n ~ m
    ```

<!-- todo: where is grouping, where is reference? -->



## Object property access

```
@
```

- see Object



## Variable Declaration

```
=:
```

```
~:
```

- see Variable



## Variable Assignment

```
~
```

- see Variable



## Reference

```
ยง
```

- can get reference of value
- references are first-class values, like in Rust
- allows to make pass-by-value and comparison-by-value



## Grouping

```
()
```



## Data Type Operators

- built-in methods on data type objects with words as names
- built-in operators built using these methods internally
- can declare top-level identifiers to make them more convenient to use

```
add @ Number =: add
+ @ Number =: +
```

- beware: don't spread out all properties of data type object, because has others that probably doesn't want, e.g. `all @ Number`
- built-in data type objects have `operators` property with object containing all operators

```
// somewhere internally within Number object
[
   add =: +
   // ...
   exponent =: ^
] =: operators
```

- can spread `operators` object out to declare top-level identifiers

```
operators @ Number =: ...

n + m
```

### Number

- built-in methods and operators on `Number` object
- arithmetic methods: `add`, `subtract`, `multiply`, `divide`, `modulo`, `exponent`
- arithmetic operators: `+`, `-`, `*`, `/`, `%`, `^`
- arithmetic assignment methods: `addOn`, `subtractOn`, `multiplyOn`, `divideOn`, `moduloOn`, `exponentOn`
- arithmetic assignment operators: `+~`, `-~`, `*~`, `/~`, `%~`, `^~`

### String

- built-in methods and operators on `String` object
- methods: `join`
- operators: `ยง`

### Boolean

- built-in methods and operators on `Boolean` object
- comparison methods: `equal`, `unequal`, `greater`, `lesser`, `greaterorequal`, `lesserorequal`
- comparison operators: `?=`, `?!=`, `?>`, `?<`, `?>=`, `?<=`
- exact equality, no coercion magic, transitive, comparison-by-value, like Rust
- logical methods: `not`, `both`, `notboth`, `either`, `neithernor`, `ifthen`, `converse`, `iff`, `butnot`
- logical operators: `!`, `&`, `!&`, `|`, `!|`, `=>`, `<=`, `<=>`, `<!=>`